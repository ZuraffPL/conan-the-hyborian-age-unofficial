{{!-- Universal item sheet that loads type-specific content --}}
<form class="{{cssClass}}" autocomplete="off">
  {{#if (eq item.type "armor")}}
    {{!-- ARMOR SHEET --}}
    <style>
      .armor-stats {
        display: flex;
        gap: 15px;
        margin-bottom: 15px;
      }
      .armor-stats .form-group {
        flex: 0 0 auto;
      }
      .form-group select {
        width: 80px !important;
      }
      select[name="system.specificMake"] {
        width: 145px !important;
      }
      .form-group input[type="number"] {
        width: 60px !important;
      }
      .armor-stats .form-group input[type="number"] {
        width: 60px !important;
        text-align: center;
      }
      .stipulations-group textarea {
        width: 100% !important;
      }
      .charname input {
        max-width: 350px !important;
      }
    </style>
    {{!-- Sheet Header --}}
    <header class="sheet-header">
      <img class="profile-img" src="{{item.img}}" data-edit="img" title="{{item.name}}" alt="{{item.name}}"/>
      <div class="header-fields">
        <h1 class="charname">
          <input name="name" type="text" value="{{item.name}}" placeholder="{{localize 'CONAN.Common.name'}}"/>
        </h1>
        <div class="item-subtitle">{{localize "TYPES.Item.armor"}}</div>
      </div>
    </header>

    {{!-- Sheet Body --}}
    <section class="sheet-body">
      
      {{!-- Armor Type --}}
      <div class="form-group">
        <label>
          <span class="primary-label">{{localize "CONAN.Armor.armorType"}}</span>
          <span class="subtitle-label">Armor Type</span>
        </label>
        <select name="system.armorType" data-dtype="String">
          {{{selectOptions armorTypeOptions selected=system.armorType}}}
        </select>
      </div>

      {{!-- Specific Make --}}
      <div class="form-group">
        <label>
          <span class="primary-label">{{localize "CONAN.Armor.specificMake"}}</span>
          <span class="subtitle-label">Specific Make</span>
        </label>
        <select name="system.specificMake" data-dtype="String">
          {{{selectOptions specificMakeOptions selected=system.specificMake}}}
        </select>
      </div>

      {{!-- Stats Row --}}
      <div class="armor-stats">
        <div class="form-group stat-group">
          <label>
            <span class="primary-label">{{localize "CONAN.Armor.armorRating"}}</span>
            <span class="subtitle-label">AR</span>
          </label>
          <input type="number" name="system.armorRating" value="{{system.armorRating}}" data-dtype="Number"/>
        </div>

        <div class="form-group stat-group">
          <label>
            <span class="primary-label">{{localize "CONAN.Armor.encumbrance"}}</span>
            <span class="subtitle-label">Enc.</span>
          </label>
          <input type="number" name="system.encumbrance" value="{{system.encumbrance}}" data-dtype="Number"/>
        </div>
      </div>

      {{!-- Equipped Checkbox --}}
      <div class="form-group checkbox-group">
        <label class="checkbox-label">
          <input type="checkbox" name="system.equipped" {{checked system.equipped}}/>
          <span class="primary-label">{{localize "CONAN.Common.equipped"}}</span>
          <span class="subtitle-label">Equipped</span>
        </label>
      </div>

      {{!-- Stipulations --}}
      <div class="form-group stipulations-group">
        <label>
          <span class="primary-label">{{localize "CONAN.Armor.stipulations"}}</span>
          <span class="subtitle-label">Stipulations</span>
        </label>
        <textarea name="system.stipulations" rows="4">{{system.stipulations}}</textarea>
      </div>

    </section>
  {{else if (eq item.type "weapon")}}
    {{!-- WEAPON SHEET --}}
    <style>
      .weapon-type-row {
        display: flex;
        gap: 15px;
        margin-bottom: 15px;
      }
      .weapon-type-row .form-group {
        flex: 0 0 auto;
      }
      .weapon-type-row .form-group select {
        width: 130px !important;
      }
      .weapon-type-row select[name="system.weaponSize"] {
        width: 100px !important;
      }
      .weapon-stats {
        display: flex;
        gap: 15px;
        margin-bottom: 15px;
      }
      .weapon-stats .form-group {
        flex: 0 0 auto;
      }
      .form-group select {
        width: 120px !important;
      }
      .form-group input[type="text"] {
        width: 80px !important;
      }
      .stipulations-group textarea {
        width: 100% !important;
      }
      .charname input {
        max-width: 350px !important;
      }
    </style>
    
    {{!-- Sheet Header --}}
    <header class="sheet-header">
      <img class="profile-img" src="{{item.img}}" data-edit="img" title="{{item.name}}" alt="{{item.name}}"/>
      <div class="header-fields">
        <h1 class="charname">
          <input name="name" type="text" value="{{item.name}}" placeholder="{{localize 'CONAN.Common.name'}}"/>
        </h1>
        <div class="item-subtitle">{{localize "TYPES.Item.weapon"}}</div>
      </div>
    </header>

    {{!-- Sheet Body --}}
    <section class="sheet-body">
      
      {{!-- Weapon Type Row (Type + Handedness for melee / Improvised for thrown) --}}
      <div class="weapon-type-row">
        {{!-- Weapon Type --}}
        <div class="form-group">
          <label>
            <span class="primary-label">{{localize "CONAN.Weapon.weaponType"}}</span>
            <span class="subtitle-label">(Type)</span>
          </label>
          <select name="system.weaponType" data-dtype="String">
            {{{selectOptions weaponTypeOptions selected=system.weaponType}}}
          </select>
        </div>

        {{!-- Handedness (only for melee weapons) --}}
        {{#if (eq system.weaponType "melee")}}
        <div class="form-group">
          <label>
            <span class="primary-label">{{localize "CONAN.Weapon.handedness"}}</span>
            <span class="subtitle-label">(Handedness)</span>
          </label>
          <select name="system.handedness" data-dtype="String">
            {{{selectOptions handednessOptions selected=system.handedness}}}
          </select>
        </div>
        {{/if}}

        {{!-- Improvised (only for thrown weapons) --}}
        {{#if (eq system.weaponType "thrown")}}
        <div class="form-group checkbox-group" style="padding: 8px; margin: 0;">
          <label class="checkbox-label">
            <input type="checkbox" name="system.improvised" {{checked system.improvised}}/>
            <span class="primary-label">{{localize "CONAN.Weapon.improvised"}}</span>
            <span class="subtitle-label">(Improvised)</span>
          </label>
        </div>
        {{/if}}
      </div>

      {{!-- Weapon Size, Range & Damage Row --}}
      <div class="weapon-type-row">
        {{!-- Weapon Size (all types) --}}
        <div class="form-group">
          <label>
            <span class="primary-label">{{localize "CONAN.Weapon.weaponSize"}}</span>
            <span class="subtitle-label">(Size)</span>
          </label>
          <select name="system.weaponSize" data-dtype="String">
            {{{selectOptions weaponSizeOptions selected=system.weaponSize}}}
          </select>
        </div>

        {{!-- Range (dependent on weapon type and size) --}}
        <div class="form-group">
          <label>
            <span class="primary-label">{{localize "CONAN.Weapon.range"}}</span>
            <span class="subtitle-label">(Range)</span>
          </label>
          <select name="system.range" data-dtype="String">
            {{{selectOptions rangeOptions selected=system.range}}}
          </select>
        </div>

        {{!-- Damage (dependent on type, handedness and size) --}}
        <div class="form-group">
          <label>
            <span class="primary-label">{{localize "CONAN.Weapon.damage"}}</span>
            <span class="subtitle-label">(Damage)</span>
          </label>
          <select name="system.damage" data-dtype="String" style="width: 55px !important;">
            {{{selectOptions damageOptions selected=system.damage}}}
          </select>
        </div>

        {{!-- Damage Modifier (only for ranged weapons) --}}
        {{#if (eq system.weaponType "ranged")}}
        <div class="form-group">
          <label>
            <span class="primary-label">{{localize "CONAN.Weapon.damageModifier"}}</span>
            <span class="subtitle-label">(Modifier)</span>
          </label>
          <input type="number" name="system.damageModifier" value="{{system.damageModifier}}" data-dtype="Number" style="width: 30px !important;"/>
        </div>
        {{/if}}
      </div>

      {{!-- Equipped Checkbox --}}
      <div class="form-group checkbox-group">
        <label class="checkbox-label">
          <input type="checkbox" name="system.equipped" {{checked system.equipped}}/>
          <span class="primary-label">{{localize "CONAN.Common.equipped"}}</span>
          <span class="subtitle-label">(Equipped)</span>
        </label>
      </div>

      {{!-- Rules/Notes --}}
      <div class="form-group stipulations-group">
        <label>
          <span class="primary-label">{{localize "CONAN.Weapon.rules"}}</span>
          <span class="subtitle-label">(Rules)</span>
        </label>
        <textarea name="system.stipulations" rows="4">{{system.stipulations}}</textarea>
      </div>

    </section>
  {{else if (eq item.type "skill")}}
    {{!-- SKILL SHEET --}}
    {{!-- Sheet Header --}}
    <header class="sheet-header">
      <img class="profile-img" src="{{item.img}}" data-edit="img" title="{{item.name}}" alt="{{item.name}}"/>
      <div class="header-fields">
        <h1 class="charname">
          <input name="name" type="text" value="{{item.name}}" placeholder="{{localize 'CONAN.Skill.name'}}"/>
        </h1>
        <div class="item-subtitle">{{localize "TYPES.Item.skill"}}</div>
      </div>
    </header>

    {{!-- Sheet Body --}}
    <section class="sheet-body">
      {{!-- Effect Description --}}
      <div class="form-group skill-effect-group">
        <label>
          <span class="primary-label">{{localize "CONAN.Skill.effect"}}</span>
          <span class="subtitle-label">(Skill Effect)</span>
        </label>
        <textarea name="system.description" rows="4" class="auto-resize-skill">{{system.description}}</textarea>
      </div>

      {{!-- XP Cost and Skill Type Row --}}
      <div style="display: flex; gap: 20px; align-items: flex-end; margin-bottom: 15px;">
        <div style="flex: 0 0 auto;">
          <label>
            <span class="primary-label">{{localize "CONAN.Skill.xpCost"}}</span>
            <span class="subtitle-label">(XP Cost)</span>
          </label>
          <input type="number" name="system.xpCost" value="{{system.xpCost}}" data-dtype="Number" min="0" style="width: 50px;"/>
        </div>

        <div style="flex: 0 0 auto;">
          <label>
            <span class="primary-label">{{localize "CONAN.Skill.skillType.label"}}</span>
            <span class="subtitle-label">(Skill Type)</span>
          </label>
          <select name="system.skillType" data-dtype="String" style="width: 140px;">
            {{{selectOptions skillTypeOptions selected=system.skillType}}}
          </select>
        </div>
      </div>
    </section>
  {{else if (eq item.type "spell")}}
    {{!-- SPELL SHEET --}}
    {{!-- Sheet Header --}}
    <header class="sheet-header">
      <img class="profile-img" src="{{item.img}}" data-edit="img" title="{{item.name}}" alt="{{item.name}}"/>
      <div class="header-fields">
        <h1 class="charname">
          <input name="name" type="text" value="{{item.name}}" placeholder="{{localize 'CONAN.Spell.name'}}"/>
        </h1>
        <div class="item-subtitle">{{localize "TYPES.Item.spell"}}</div>
      </div>
    </header>

    {{!-- Sheet Body --}}
    <section class="sheet-body">
      {{!-- Discipline and XP Cost Row --}}
      <div style="display: flex; gap: 15px; align-items: flex-start; justify-content: space-between; margin-bottom: 15px;">
        <div class="form-group" style="flex: 0 0 120px; margin-bottom: 0;">
          <label>
            <span class="primary-label">{{localize "CONAN.Spell.discipline"}}</span>
            <span class="subtitle-label">(Discipline)</span>
          </label>
          <select name="system.discipline" data-dtype="String" style="width: 120px;">
            {{{selectOptions disciplineOptions selected=system.discipline}}}
          </select>
        </div>
        
        <div class="form-group" style="flex: 0 0 50px; margin-bottom: 0;">
          <label>
            <span class="primary-label">{{localize "CONAN.Spell.xpCost"}}</span>
            <span class="subtitle-label">(XP)</span>
          </label>
          <input type="number" name="system.xpCost" value="{{system.xpCost}}" min="0" data-dtype="Number" style="width: 50px;"/>
        </div>
      </div>

      {{!-- Effect --}}
      <div class="form-group">
        <label>
          <span class="primary-label">{{localize "CONAN.Spell.effect"}}</span>
          <span class="subtitle-label">(Effect)</span>
        </label>
        <textarea name="system.effect" rows="4">{{system.effect}}</textarea>
      </div>

    </section>
  {{/if}}
</form>

